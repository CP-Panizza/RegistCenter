webpackJsonp([1],{"6uW4":function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("7+uW"),n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var o=a("VU/8")({name:"App"},n,!1,function(e){a("s347")},null,null).exports,i=a("mtWM"),s=a.n(i),l=a("zL8q"),c=a.n(l),p=(a("tvR6"),a("/ocq")),d={name:"Home",data:function(){return{activeIndex:"1",panel:"1",servername:"",ip:"",proportion:"0",tableData:[],newServerName:"",newIp:"",newProportion:"0",oldServerName:"",oldIp:"",oldProportion:"0",newIndex:-1}},created:function(){var e=this;this.$axios.get("/getAll").then(function(t){console.log(t),200==t.status?e.tableData=t.data.data:e.$notify({title:"data err!",message:"get data error!"})}).catch(function(t){e.$notify({title:"data err!",message:"get data error!"}),console.log(t)})},methods:{handleSelect:function(e,t){console.log(e,t),this.panel=1==e?"1":"2"},del:function(e){var t=this,a=e.target.getAttribute("data-server"),r=e.target.getAttribute("data-ip"),n=e.target.getAttribute("data-index");this.$axios.delete("/del?server="+a+"&ip="+r).then(function(e){200==e.status&&1==e.data.success?(t.$notify({title:"success!",message:"delete server success!"}),t.tableData.splice(n,1)):t.$notify({title:"action err!",message:"delete server failure!"})}).catch(function(e){t.$notify({title:"action err!",message:"delete server failure!"}),console.log(e)})},onSubmit:function(){var e=this;if(""!=this.servername||""!=this.ip){for(var t in e.tableData)if(e.tableData[t].server==this.servername.trim()&&e.tableData[t].ip==this.ip.trim())return void e.$notify({title:"success!",message:"server already exsist!"});this.$axios.post("/add",{servername:this.servername.trim(),ip:this.ip.trim(),proportion:this.proportion}).then(function(t){1==t.data.success&&200==t.status?(e.tableData.push({server:e.servername,ip:e.ip,proportion:e.proportion}),e.servername="",e.ip="",e.proportion=0,e.$notify({title:"success!",message:"add server success!"})):(e.$notify({title:"action err!",message:"add server failure!"}),e.servername="",e.ip="",e.proportion=0)}).catch(function(t){console.log(t),e.$notify({title:"action err!",message:"add server failure!"}),e.servername="",e.ip="",e.proportion="0"})}else e.$notify({title:"input data err!",message:"servername and ip not be null!"})},change:function(e){var t=e.target.getAttribute("data-server"),a=e.target.getAttribute("data-ip"),r=e.target.getAttribute("data-prop"),n=e.target.getAttribute("data-index");this.newServerName=t,this.newIp=a,this.newProportion=r,this.oldServerName=t,this.oldIp=a,this.oldProportion=r,this.newIndex=n},changeConfirm:function(){var e=this;this.$axios.post("/change",{newServerName:e.newServerName,newIp:e.newIp,newProportion:e.newProportion,oldServerName:e.oldServerName,oldIp:e.oldIp,oldProportion:e.oldProportion}).then(function(t){1==t.data.success&&200==t.status?(e.tableData[e.newIndex]={server:e.newServerName,ip:e.newIp,proportion:e.newProportion},e.$notify({title:"success!",message:"update server success!"}),e.newServerName="",e.newIp="",e.newProportion="",e.oldServerName="",e.oldIp="",e.oldProportion="",e.newIndex=""):(e.newServerName="",e.newIp="",e.newProportion="",e.oldServerName="",e.oldIp="",e.oldProportion="",e.newIndex="",e.$notify({title:"action err!",message:"update server failure!"}))}).catch(function(t){console.log(t),e.newServerName="",e.newIp="",e.newProportion="",e.oldServerName="",e.oldIp="",e.oldProportion="",e.newIndex="",e.$notify({title:"action err!",message:"update server failure!"})})}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.activeIndex,mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:e.handleSelect}},[a("el-menu-item",{attrs:{index:"1"}},[e._v("Staging")]),e._v(" "),a("el-menu-item",{attrs:{index:"2"}},[e._v("MyPage")])],1),e._v(" "),a("div",{staticClass:"line"}),e._v(" "),"1"==e.panel?a("div",{staticClass:"panel"},[a("div",{staticClass:"add"},[a("div",{staticClass:"title"},[e._v("Add Server")]),e._v(" "),a("div",{staticClass:"form"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"Server-Name"}},[a("el-input",{attrs:{clearable:""},model:{value:e.servername,callback:function(t){e.servername=t},expression:"servername"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Ip"}},[a("el-input",{attrs:{clearable:""},model:{value:e.ip,callback:function(t){e.ip=t},expression:"ip"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Proportion"}},[a("el-input",{attrs:{clearable:""},model:{value:e.proportion,callback:function(t){e.proportion=t},expression:"proportion"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("Add")])],1)],1)],1)]),e._v(" "),a("div",{staticClass:"data"},[a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"server",label:"Server-Name",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"Ip",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"proportion",label:"Proportion",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"Opration",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"btns"},[a("div",{staticClass:"del_btn",attrs:{"data-server":t.row.server,"data-ip":t.row.ip,"data-index":t.$index},on:{click:e.del}},[e._v("Del")]),e._v(" "),a("el-popover",{attrs:{placement:"right",width:"200",trigger:"click"}},[a("el-input",{staticClass:"input_style",attrs:{disabled:""},model:{value:e.newServerName,callback:function(t){e.newServerName=t},expression:"newServerName"}}),e._v(" "),a("el-input",{staticClass:"input_style",attrs:{placeholder:"input ip",clearable:""},model:{value:e.newIp,callback:function(t){e.newIp=t},expression:"newIp"}}),e._v(" "),a("el-input",{staticClass:"input_style",attrs:{placeholder:"input proportion",clearable:""},model:{value:e.newProportion,callback:function(t){e.newProportion=t},expression:"newProportion"}}),e._v(" "),a("el-button",{staticClass:"login_style",attrs:{type:"primary"},on:{click:e.changeConfirm}},[e._v("确定")]),e._v(" "),a("div",{staticClass:"del_btn",attrs:{slot:"reference","data-server":t.row.server,"data-ip":t.row.ip,"data-prop":t.row.proportion,"data-index":t.$index},on:{click:e.change},slot:"reference"},[e._v("Edit")])],1)],1)]}}],null,!1,1724780752)})],1)],1)])]):e._e(),e._v(" "),"2"==e.panel?a("div",{staticClass:"panel"},[e._v("工作台")]):e._e()],1)},staticRenderFns:[]};var v=a("VU/8")(d,u,!1,function(e){a("6uW4")},"data-v-0e4f5401",null).exports,m={name:"Login",data:function(){return{name:"",pwd:""}},methods:{login:function(){var e=this;this.$axios.post("/login",{username:this.name,password:this.pwd}).then(function(t){1==t.data.success&&200==t.status?(e.$store.commit("setLogin",!0),localStorage.setItem("login","true"),e.$router.push({path:"/home"},function(e){},function(e){})):e.$notify({title:"login err!",message:"username or password error!"})}).catch(function(e){console.log(e)})}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login"},[a("h1",[e._v("Login")]),e._v(" "),a("div",[a("el-input",{staticClass:"input_style",attrs:{placeholder:"enter username",clearable:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),a("div",[a("el-input",{staticClass:"input_style",attrs:{placeholder:"enter password","show-password":""},model:{value:e.pwd,callback:function(t){e.pwd=t},expression:"pwd"}})],1),e._v(" "),a("div",[a("el-button",{staticClass:"login_style",attrs:{type:"primary"},on:{click:e.login}},[e._v("login")])],1)])},staticRenderFns:[]};var g=a("VU/8")(m,f,!1,function(e){a("T9hU")},null,null).exports;r.default.use(p.a);var h=new p.a({routes:[{path:"/",name:"login",component:g,meta:{isLogin:!1}},{path:"/home",name:"home",component:v,meta:{isLogin:!0}}]}),w=a("NYxO");r.default.use(w.a);var b=new w.a.Store({state:{isLogin:!1},mutations:{setLogin:function(e,t){e.isLogin=t}},getters:{getLogin:function(e){return e.isLogin}},actions:{},modules:{}});r.default.use(c.a),r.default.prototype.$axios=s.a,r.default.config.productionTip=!1,h.beforeEach(function(e,t,a){var r=localStorage.getItem("login");console.log(r),"true"==r?(b.state.isLogin=!0,console.log("next()"),a(),e.meta.isLogin||(console.log("next(/)"),a({path:"/"}))):e.meta.isLogin?a({path:"/"}):a()}),h.afterEach(function(e){window.scroll(0,0)}),new r.default({el:"#app",router:h,store:b,components:{App:o},template:"<App/>"})},T9hU:function(e,t){},s347:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.9ddb151ff3959fe3f834.js.map